package require Tcl
package require pdn 0.3.0

# Input = Macro-packed DEF (currently from innovus)
# Output = Def with PDN

proc apply_pdn {block config} {
    pdn init $block $config

    puts "##Power Delivery Network Generator: Generating PDN DEF"
    set ::start_time [clock clicks -milliseconds]

    pdn plan_grid
    pdn update_grid

    puts "Total walltime to generate PDN DEF = [expr {[expr {[clock clicks -milliseconds] - $::start_time}]/1000.0}] seconds"

#    $block writeDef

    puts "Total walltime till final DEF stitching = [expr {[expr {[clock clicks -milliseconds] - $::start_time}]/1000.0}] seconds"
}
